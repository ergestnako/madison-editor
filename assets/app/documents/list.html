
<h1>{{ "menu.nav.documents" | translate }}</h1>

<div ng-controller="DocumentListController" ng-cloak>
  <section class="create-document">
    <button
      ng-click="showCreateForm()"
      ng-show="!showForm">{{ "documents.list.create" | translate }}</button>
    <div class="document-types" ng-show="showForm">
      <header>
        <h2>{{ "documents.list.create" | translate }}</h2>
      </header>

      <div ng-repeat="template in templates" class="document-type document-type--{{template.slug}}">
        <a ng-click="createDocument(template)">
          <span class="document-type__icon document-type__icon__{{template.slug}}"></span>
          <span class="document-type__title">{{ "documents.list.new" | translate:'{title:template.title}' }} </span>
        </a>
      </div>

      <div class="document-type document-type--blank">
        <a ng-click="createDocument()">
          <span class="document-type__icon resolution__icon"></span>
          <span class="document-type__title">{{ "documents.list.new.blank" | translate }}</span>
        </a>
      </div>

    </div>
  </section>

  <table class="documents-list">
    <thead>
      <tr>
        <th class="document__title">{{ "documents.list.heading.title" | translate }}</th>
        <th class="document__date-updated">{{ "documents.list.heading.updated" | translate }}</th>
        <th class="document__delete">{{ "documents.list.heading.delete" | translate }}</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="doc in documents" class="document">
        <td class="document__title">
          <a href="/documents/{{doc.id}}">{{doc.title}}</a>
          <span class="document__template" ng-if="doc.is_template">{{ "documents.list.label.template" | translate }}</span>
        </td>
        <td class="document__date-updated">
             {{ doc.updated_at | date : 'medium' }}
        </td>
        <td class="document__delete" ng-class="{open: deleteConfirmOpen[doc.id]}">
          <button type="button" class="button button-delete"
            ng-click="openDeleteConfirm(doc)"><span>{{ "documents.list.delete" | translate }}</span></button>
          <div class="confirm-delete">
            {{ "form.action.confirm_message" | translate }}
            <button class="button button-confirm" type="submit"
              ng-click="deleteDocument(doc)" title="delete document">
              <span>{{ "form.action.delete" | translate }}</span></button>
            <button class="button button-cancel" type="button"
              ng-click="closeDeleteConfirm(doc)" title="cancel">
              <span>{{ "form.action.cancel" | translate }}</span></button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
